## **Project Overview**
This project is designed to analyze log files generated by a water health management system that monitors connection statuses. The log files contain timestamps and status messages (e.g., Connected, Disconnected), and this script processes these logs to calculate the time intervals when the system was connected or disconnected. The results are saved in a CSV format for further analysis.

## **Features**
- **Log File Parsing**: Reads system log files and extracts timestamps for connection and disconnection events.
- **Time Interval Calculation**: Computes the duration for which the system remained connected or disconnected.
- **CSV Output**: The results, including start time, end time, and duration for each state (Connected/Disconnected), are written to a CSV file for further use.
- **Date Handling**: Automatically adds end-of-day timestamps for any incomplete logs.

## Requirements
- Python 3.x
- Pandas
  
## **Input Files**
The project expects log files in the following format (adjustable):
```
[YYYY-MM-DD HH:MM:SS] [INFO/WARNING/ERROR] System ID: WHM-001 | Connection Status: [Connected/Disconnected] | Additional Info: ...
```

Sample log entries:
```
[2024-10-05 00:00:00] [INFO] System ID: WHM-001 | Connection Status: Connected | Signal Strength: Strong
[2024-10-05 04:00:20] [ERROR] System ID: WHM-001 | Connection Status: Disconnected | Error Code: 2002 | Message: Signal lost due to maintenance
[2024-10-05 05:15:35] [INFO] System ID: WHM-001 | Connection Status: Reconnected | Signal Strength: Weak
```

## **Output**
The final output is a CSV file containing the following columns:
- **Start Time**: The timestamp when the system was connected or disconnected.
- **End Time**: The timestamp when the connection/disconnection ended.
- **Duration**: The duration for which the system was in the connected or disconnected state.
- **Status**: Indicates whether the system was "Connected" or "Disconnected."

Example output:
| Start Time           | End Time             | Duration        | Status       |
|----------------------|----------------------|-----------------|--------------|
| 2024-10-05 00:00:00  | 2024-10-05 01:00:05  | 1 hour          | Connected    |
| 2024-10-05 01:00:05  | 2024-10-05 02:00:10  | 1 hour          | Disconnected |
| 2024-10-05 02:00:10  | 2024-10-05 03:00:15  | 1 hour          | Connected    |

## **How the Script Works**
1. **Log File Processing**: The script opens each log file in the specified directory and scans for entries with "Connected" or "Disconnected" statuses.
2. **Event Pairing**: It matches each connection event with its corresponding disconnection event, calculates the time difference, and logs it.
3. **CSV Generation**: The calculated connection and disconnection times are written into a CSV file, sorted chronologically.

## **Error Handling**
- **Missing Logs**: If a log file for a particular day is missing, the script skips it and prints a warning message.
- **Incomplete Logs**: If a log file is missing a disconnection time, the script adds a default end-of-day timestamp (23:59:59) to ensure continuity in the time calculations.

## **Customization**
- **Date Format**: The date and time format can be modified by changing the `dateformat` variable in the code.
- **Log Directory**: Update the `log_dir` variable with the path to your own directory containing the log files.
- **Log File Names**: The script expects log files to follow a naming convention (`OperaWater_Edge.log.YYYY-MM-DD.txt`). This can be customized as needed.

## **Usage Example**
1. Place the log files in the `log_dir` folder.
2. Run the script:
   ```bash
   python log_analysis.py
   ```
3. The output CSV file will be created in the specified output directory, containing the processed data.

## **Possible Extensions**
- **Error Code Analysis**: Extend the script to handle and analyze error codes present in log entries.
- **Data Visualization**: Integrate libraries like `matplotlib` or `seaborn` to visualize connection trends over time.
- **Real-time Monitoring**: Adapt the script to monitor logs in real-time and generate reports dynamically.

## **Contributing**
If youâ€™d like to contribute to this project, feel free to fork the repository, create a new branch, and submit a pull request. Contributions, whether bug fixes, feature additions, or documentation improvements, are always welcome.
